<section class="about-image-description" id="about-image-description">
  <div class="about-image-description__wrapper">
    {% liquid
      assign block_count = 0
      for block in section.blocks
        if block.type == 'Image'
          assign block_count = block_count | plus: 1
        endif
      endfor
    %}
    <div class="about-image-description___image-wrapper {% if block_count >= 2 %} image-grid__wrapper {% endif %}">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'Image' %}
            {% if section.blocks.size < 2 %}
              <figure>
                <picture>
                  <source srcset="{{ block.settings.image | image_url }}" media="(max-width: 750px)">
                  <img
                    src="{{ block.settings.image | image_url }}"
                    alt="Description of the image"
                    width="{{ block.settings.image.width }}"
                    height="{{ block.settings.image.height }}"
                  >
                </picture>
              </figure>
            {% else %}
              <div class="image-grid__block image-grid__block-{{ forloop.index }}">
                <figure class="image-grid__block-fig-item">
                  <picture>
                    <source srcset="{{ block.settings.image | image_url }}" media="(max-width: 750px)">
                    <img
                      src="{{ block.settings.image | image_url }}"
                      alt="Description of the image"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                    >
                  </picture>
                </figure>
              </div>
            {% endif %}
        {% endcase %}
      {% endfor %}
    </div>

    <div class="about-image-description__content-wrapper">
      <div class="about-image-description__title">
        {{ section.settings.title }}
      </div>
      <div class="about-image-description__description">
        {{ section.settings.description }}
      </div>
    </div>
  </div>
  {% for block in section.blocks %}
    {% case block.type %}
      {% when 'Insights' %}
        <div class="insights__wrapper">
          <div class="insights">
            <span>{{ block.settings.insight_count }}K</span>
            <span>{{ block.settings.insights_label }}</span>
          </div>
        </div>
    {% endcase %}
  {% endfor %}
</section>
<style>
  .image-grid__wrapper {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    width: 50%;
  }
  .image-grid__block {
    background-color: white;
    border-radius: 12px;
    max-width: 476px;
    padding: 10px;
    width: 100%;
  }
  .image-grid__block img {
    aspect-ratio: 1/1;
    display: block;
    width: 100%;
    height: 100%;
  }
  .image-grid__block-1 {
    grid-area: 1/1/3/3;
  }
  .image-grid__block-2 {
    grid-area: 2/2/4/4;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
  }
  .image-grid__block-fig-item {
    margin: 0;
  }
</style>
{% schema %}
{
  "name": "t:sections.about-image-description.name",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.about-image-description.settings.title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "t:sections.about-image-description.settings.description"
    }
  ],
  "blocks": [
    {
      "type": "t:sections.about-image-description.blocks.type.image",
      "name": "t:sections.about-image-description.blocks.type.image",
      "limit": 2,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.about-image-description.blocks.settings.image"
        }
      ]
    },
    {
      "type": "t:sections.about-image-description.blocks.type.insights",
      "name": "t:sections.about-image-description.blocks.type.insights",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "insight_count",
          "label": "t:sections.about-image-description.blocks.settings.insights_count"
        },
        {
          "type": "text",
          "id": "insights_label",
          "label": "t:sections.about-image-description.blocks.settings.insights_label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.about-image-description.presets.name"
    }
  ]
}
{% endschema %}
