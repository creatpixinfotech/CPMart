{{ 'section-deal-of-the-day.css' | asset_url | stylesheet_tag }}
<script src="{{ 'timer.js' | asset_url }}" defer="defer"></script>


<div class="page-width deal-of-the-day" style="background-color: {{ section.settings.background-color }};">
  <div class="section-header">
    <div class="sub-header">
      <span>{{ section.settings.sub_title }}</span>
      {% render '_icon-line' %}
    </div>
    <h2 class="header-{{ section.settings.title_position }}">{{ section.settings.title }}</h2>
  </div> 
  <div class="section-content section-content-{{ section.settings.collection-position }}">
    {% for block in section.blocks %}
    {% case block.type %}
    {% when 'collection' %} 
      <div class="collection-deal" style="background-color: {{ block.settings.background-color }};">
        <div class="collection-image">
          <img
            srcset="
              {%- if block.settings.image.width >= 165 -%}{{ block.settings.image | image_url: width: 165 }} 165w,{%- endif -%}
              {%- if block.settings.image.width >= 360 -%}{{ block.settings.image | image_url: width: 360 }} 360w,{%- endif -%}
              {%- if block.settings.image.width >= 533 -%}{{ block.settings.image | image_url: width: 533 }} 533w,{%- endif -%}
              {%- if block.settings.image.width >= 720 -%}{{ block.settings.image | image_url: width: 720 }} 720w,{%- endif -%}
              {%- if block.settings.image.width >= 940 -%}{{ block.settings.image | image_url: width: 940 }} 940w,{%- endif -%}
              {%- if block.settings.image.width >= 1066 -%}{{ block.settings.image | image_url: width: 1066 }} 1066w,{%- endif -%}
              {{ block.settings.image | image_url }} {{ block.settings.image.width }}w
            "
            src="{{ block.settings.image | image_url: width: 533 }}"
            sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
            alt="{{ block.settings.image.alt | escape }}"
            class="motion-reduce"
            width="{{  block.settings.image.width }}"
            height="{{  block.settings.image.height }}"
          >
        </div>
        <div class="collection-content">
          <a href="{{ block.settings.collection.url }}">{{ block.settings.title }}</a>
          <div>{{ block.settings.subtitle }}</div>
        </div>
        <div class="collection-timer">
          <div class="collection-time">
            <span class="day">{{ block.settings.day }}</span>
            <span class="span">Days</span>
          </div> :
          <div class="collection-time">
            <span class="hours">{{ block.settings.hours }}</span>
            <span>Hours</span>
          </div> :
          <div class="collection-time">
            <span class="mins">{{ block.settings.mins }}</span> 
            <span>Mins</span>
          </div> :
          <div class="collection-time">
            <span class="secs">{{ block.settings.secs }}</span>
            <span>Secs</span>
          </div>
        </div>
      </div>
      {% when 'product' %}
      <div class="product-deal">
        {% for product in block.settings.product_list %}
          <div class="products">
            {% render 'card-product',
            card_product: product,
            section_id: section.id,
            quick_add: section.settings.quick_add
            %}
          </div>
        {% endfor %}
      </div>
      {% endcase %}
    {% endfor %}
  </div>                  
</div>

{% schema %}
{
  "name": "t:sections.deal-of-the-day.name",
  "settings": [
    {
      "type": "color",
      "id": "background-color",
      "label": "t:sections.deal-of-the-day.settings.background_color.label"
    },
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.deal-of-the-day.settings.title.label"
    },
    {
      "type": "text",
      "id": "sub_title",
      "label": "t:sections.deal-of-the-day.settings.sub_title.label"
    },
    {
      "type": "select",
      "id": "title_position",
      "label": "t:sections.deal-of-the-day.settings.title_position.label",
      "options": [
        {
          "value": "left",
          "label": "t:sections.deal-of-the-day.settings.title_position.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.deal-of-the-day.settings.title_position.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.deal-of-the-day.settings.title_position.options__3.label"
        }
      ],
      "default": "left"  
    },
    {
      "type": "select",
      "id": "collection-position",
      "label": "t:sections.deal-of-the-day.settings.collection_position.label",
      "options": [
        {
          "value": "row",
          "label": "t:sections.deal-of-the-day.settings.collection_position.option_1.label"
        },
        {
          "value": "row-reverse",
          "label": "t:sections.deal-of-the-day.settings.collection_position.option_2.label"
        }
      ],
      "default": "row"  
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "t:sections.deal-of-the-day.blocks.collection_deal.name",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.image.label"
        },
        {
          "type": "color",
          "id": "background-color",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.color.label"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.collection.label"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.title.label"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.sub_title.label"
        },
        {
          "type": "number",
          "id": "day",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.day.label",
          "default": 0
        },
        {
          "type": "number",
          "id": "hours",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.hours.label",
          "default": 0
        },
        {
          "type": "number",
          "id": "mins",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.minutes.label",
          "default": 0
        },
        {
          "type": "number",
          "id": "secs",
          "label": "t:sections.deal-of-the-day.blocks.collection_deal.settings.seconds.label",
          "default": 0
        }
      ]
    },
    {
      "type": "product",
      "name": "t:sections.deal-of-the-day.blocks.product_deal.name",
      "settings": [
        {
          "type": "product_list",
          "id": "product_list",
          "label": "t:sections.deal-of-the-day.blocks.product_deal.settings.product_list.label"
        }
      ]  
    }
  ],
  "presets": [
    {
      "name": "t:sections.deal-of-the-day.presets.name"
    }
  ]
}
{% endschema %}
